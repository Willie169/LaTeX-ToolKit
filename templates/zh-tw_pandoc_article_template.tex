\documentclass[a4paper,12pt]{article}
\usepackage[margin=1.27cm,foot=0.77cm]{geometry}
\usepackage[defaultlines=8]{nowidow}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{xeCJK,fontspec,titlesec,titling,setspace,needspace}
\usepackage{amsthm,amsmath,amsfonts,amssymb,dsfont,stmaryrd,unicode-math,mathtools,mathrsfs}
\usepackage{diagbox,cellspace,array,booktabs,longtable,enumitem,enumerate,graphicx,caption,subcaption,float,placeins,xcolor}
\usepackage{zhnumber,tikz,xparse,physics}
\usepackage[fencedCode,tightLists,hybrid,definitionLists]{markdown}
\usepackage{url,hyperref}\hypersetup{colorlinks=false}
\righthyphenmin=4
\lefthyphenmin=4
\pretolerance=5000
\tolerance=9000
\emergencystretch=1em
\setlength{\parindent}{0pt}
\everymath{\displaystyle}
\everydisplay{\displaystyle}
\captionsetup{labelformat=empty}
\captionsetup[subfigure]{labelformat=empty}
\renewcommand{\maketitle}{%
  \begin{titlepage}%
    \begin{center}%
      \vspace*{\fill}%
      {\huge \bfseries \thetitle\par}%
      \vskip 1.5em%
      {\Large \theauthor\par}%
      \vskip 1em%
      {\large \thedate\par}%
      \vspace*{\fill}%
    \end{center}%
  \end{titlepage}%
}
\usepackage{listings}
\lstdefinestyle{tex}{
    language=[LaTeX]TeX,
    breaklines=true,
    breakatwhitespace=true,
    basicstyle=\ttfamily\scriptsize,
    keywordstyle=\color{blue},
    identifierstyle=\color{magenta},
    commentstyle=\color{green!60!black},
    stringstyle=\color{red},
    numbers=left,
    numberstyle=\tiny\color{gray},
    stepnumber=1,
    numbersep=5pt,
    tabsize=2,
    frame=single,
    columns=fullflexible,
    showspaces=false,
    showstringspaces=false,
    keepspaces=true,
    literate={<}{{\textcolor{blue}{\{}}}1 
             {>}{{\textcolor{blue}{\}}}}1,
}
\lstdefinestyle{cpp}{
  language=C++,
  basicstyle=\ttfamily\scriptsize,
  keywordstyle=\color{blue},
  stringstyle=\color{red},
  commentstyle=\color{green},
  numberstyle=\tiny\color{gray},
  numbers=left,
  stepnumber=1,
  numbersep=5pt,
  backgroundcolor=\color{white},
  showspaces=false,
  showstringspaces=false,
  showtabs=false,
  frame=single,
  rulecolor=\color{black},
  tabsize=2,
  captionpos=b,
  breaklines=true,
  breakatwhitespace=true,
  escapeinside={\%*}{*)}
}
\lstdefinestyle{python}{
  language=Python,
  basicstyle=\ttfamily\scriptsize,
  keywordstyle=\color{blue},
  stringstyle=\color{red},
  commentstyle=\color{green!50!black},
  numberstyle=\tiny\color{gray},
  numbers=left,
  stepnumber=1,
  numbersep=5pt,
  backgroundcolor=\color{white},
  showspaces=false,
  showstringspaces=false,
  showtabs=false,
  frame=single,
  rulecolor=\color{black},
  tabsize=4,
  captionpos=b,
  breaklines=true,
  breakatwhitespace=true,
  escapeinside={(*@}{@*)},
  morekeywords={True, False, None},
}
\makeatletter
\newcommand{\overleftrightsmallarrow}{\mathpalette{\overarrowsmall@\leftrightarrowfill@}}
\newcommand{\overrightsmallarrow}{\mathpalette{\overarrowsmall@\rightarrowfill@}}
\newcommand{\overleftsmallarrow}{\mathpalette{\overarrowsmall@\leftarrowfill@}}
\newcommand{\overarrowsmall@}[3]{%
  \vbox{%
    \ialign{%
      ##\crcr
      #1{\smaller@style{#2}}\crcr
      \noalign{\nointerlineskip}%
      $\m@th\hfil#2#3\hfil$\crcr
    }%
  }%
}
\def\smaller@style#1{%
  \ifx#1\displaystyle\scriptstyle\else
    \ifx#1\textstyle\scriptstyle\else
      \scriptscriptstyle
    \fi
  \fi
}
\makeatother
\ProvideDocumentCommand{\al}{}{&}
\ProvideDocumentCommand{\and}{}{\&}
\ProvideDocumentCommand{\ba}{}{\begin{aligned}}
\ProvideDocumentCommand{\bct}{}{\begin{center}}
\ProvideDocumentCommand{\bcs}{}{\begin{cases}}
\ProvideDocumentCommand{\be}{}{\begin{equation}}
\ProvideDocumentCommand{\bf}{}{\begin{figure}}
\ProvideDocumentCommand{\bfH}{}{\begin{figure}[H]}
\ProvideDocumentCommand{\bg}{m}{\begin{#1}}
\ProvideDocumentCommand{\bm}{}{\[}
\ProvideDocumentCommand{\bma}{}{\[\begin{aligned}}
\ProvideDocumentCommand{\bmac}{}{\[\begin{aligned}\begin{cases}}
\ProvideDocumentCommand{\bmc}{}{\[\begin{cases}}
\ProvideDocumentCommand{\btb}{}{\begin{table}}
\ProvideDocumentCommand{\btbr}{o}{\begin{tabular}{#1}}
\ProvideDocumentCommand{\btk}{}{\begin{tikzpicture}}
\ProvideDocumentCommand{\cd}{}{\cdot}
\ProvideDocumentCommand{\chf}{m}{\chemfig{#1}}
\let\clp\clearpage
\ProvideDocumentCommand{\ctr}{}{\centering}
\ProvideDocumentCommand{\df}{m m o}{\IfNoValueTF{#3}{\frac{\mathrm{d}#1}{\mathrm{d}#2}}{\frac{\mathrm{d}^{#1}#2}{\mathrm{d}#3^{#1}}}}
\ProvideDocumentCommand{\dpre}{m m o}{\IfNoValueTF{#3}{\frac{\mathrm{d}}{\mathrm{d}#2}\left(#1\right)}{\frac{\mathrm{d}^{#1}}{\mathrm{d}#3^{#1}}\left(#2\right)}}
\ProvideDocumentCommand{\dv}{}{\div}
\ProvideDocumentCommand{\ed}{m}{\end{#1}}
\ProvideDocumentCommand{\ea}{}{\end{aligned}}
\ProvideDocumentCommand{\eam}{}{\end{aligned}\]}
\ProvideDocumentCommand{\ect}{}{\end{center}}
\ProvideDocumentCommand{\ecs}{}{\end{cases}}
\ProvideDocumentCommand{\ecam}{}{\end{cases}\end{aligned}\]}
\ProvideDocumentCommand{\ecm}{}{\end{cases}\]}
\ProvideDocumentCommand{\ee}{}{\end{equation}}
\ProvideDocumentCommand{\ef}{}{\end{figure}}
\ProvideDocumentCommand{\em}{}{\]}
\ProvideDocumentCommand{\eq}{}{=}
\ProvideDocumentCommand{\etb}{}{\end{table}}
\ProvideDocumentCommand{\etbr}{}{\begin{tabular}}
\ProvideDocumentCommand{\etk}{}{\end{tikzpicture}}
\ProvideDocumentCommand{\f}{m m}{\frac{#1}{#2}}
\ProvideDocumentCommand{\FB}{}{\FloatBarrier}
\ProvideDocumentCommand{\ht}{m}{\hat{#1}}
\let\hf=\hfill
\let\icg\includegraphics
\ProvideDocumentCommand{\itg}{m m o o}{%
  \IfNoValueTF{#4}{%
    \IfNoValueTF{#3}{%
      \int #1\,\mathrm{d}{#2}%
    }{%
      \int_0^{#1} #2\,\mathrm{d}{#3}%
    }%
  }{%
    \int_{#1}^{#2} #3\,\mathrm{d}{#4}%
  }%
}
\let\La=\Leftarrow
\let\la=\leftarrow
\let\ld=\ldots
\let\Lra=\Leftrightarrow
\let\lra=\leftrightarrow
\ProvideDocumentCommand{\mb}{m}{\mathbf{#1}}
\ProvideDocumentCommand{\mc}{m}{\mathcal{#1}}
\ProvideDocumentCommand{\md}{m}{\mathds{#1}}
\ProvideDocumentCommand{\mdp}{m}{\[#1\]}
\ProvideDocumentCommand{\mil}{m}{\(#1\)}
\ProvideDocumentCommand{\mi}{m}{\mathit{#1}}
\ProvideDocumentCommand{\mn}{}{-}
\ProvideDocumentCommand{\ms}{m}{\mathscr{#1}}
\ProvideDocumentCommand{\n}{}{\\}
\ProvideDocumentCommand{\npgb}{o}{\IfNoValueTF{#1}{\nopagebreak}{\nopagebreak{#1}}}
\ProvideDocumentCommand{\nth}{o}{\IfNoValueTF{#1}{\Needspace{1\textheight}}{\Needspace{#1\textheight}}}
\ProvideDocumentCommand{\nthm}{}{\Needspace{1\textheight-1em}}
\ProvideDocumentCommand{\ol}{m}{\overline{#1}}
\ProvideDocumentCommand{\ola}{m}{\overleftsmallarrow{#1}}
\ProvideDocumentCommand{\olra}{m}{\overleftrightsmallarrow{#1}}
\ProvideDocumentCommand{\ora}{m}{\overrightsmallarrow{#1}}
\ProvideDocumentCommand{\parallelsum}{}{\mathbin{\!/\mkern-5mu/\!}}
\ProvideDocumentCommand{\pc}{}{\%}
\ProvideDocumentCommand{\pf}{m m o}{\IfNoValueTF{#3}{\frac{\partial #1}{\partial #2}}{\frac{\partial^{#1} #2}{\partial #3^{#1}}}}
\ProvideDocumentCommand{\pgb}{o}{\IfNoValueTF{#1}{\pagebreak}{\pagebreak{#1}}}
\ProvideDocumentCommand{\pht}{m}{\phantom{#1}}
\ProvideDocumentCommand{\ppre}{m m o}{\IfNoValueTF{#3}{\partial #2 \left( #1 \right)}{\frac{\partial^{#1}}{\partial #3^{#1}} \left( #2 \right)}}
\let\Ra=\Rightarrow
\let\ra=\rightarrow
\ProvideDocumentCommand{\rl}{}{\relax}
\newcommand{\RNum}[1]{\uppercase\expandafter{\romannumeral #1\relax}}
\ProvideDocumentCommand{\st}{}{*}
\ProvideDocumentCommand{\tb}{m}{\textbf{#1}}
\ProvideDocumentCommand{\tc}{m}{\text{\raisebox{.6pt}{\textcircled{\raisebox{-.9pt}{#1}}}}}
\ProvideDocumentCommand{\ti}{m}{\textit{#1}}
\ProvideDocumentCommand{\ts}{o}{\IfNoValueTF{#1}{\text{\protect\ }}{\text{\protect\foreach\i in{1,2,...,#1}{\protect\ }}}}
\ProvideDocumentCommand{\tx}{m}{\text{#1}}
\ProvideDocumentCommand{\vc}{m}{\vec{#1}}
\let\vf=\vfill
\ProvideDocumentCommand{\vsp}{s m}{\IfBooleanTF{#1}{\vspace*{#2}}{\vspace{#2}}}
\ProvideDocumentCommand{\vsf}{}{\vspace*{\fill}}
\ProvideDocumentCommand{\xx}{m}{\times}
\titleclass{\subsubparagraph}{straight}[\subparagraph]
\newcounter{subsubparagraph}[subparagraph]
\titlespacing*{\subsubparagraph}{\parindent}{3.25ex plus 1ex minus .2ex}{1em}
\renewcommand\thesection{第\zhnumber[style={Traditional,Normal}]{\arabic{section}}章}
\renewcommand\thesubsection{\zhnumber[style={Traditional,Normal}]{\arabic{subsection}}、}
\renewcommand\thesubsubsection{(\zhnumber[style={Traditional,Normal}]{\arabic{subsubsection}})}
\renewcommand\theparagraph{\arabic{paragraph}.}
\renewcommand\thesubparagraph{(\arabic{subparagraph})}
\renewcommand\thesubsubparagraph{\boxed{\arabic{subsubparagraph}}}
\titleformat{\section}[block]{\Large\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}{\large\bfseries}{\thesubsection}{1em}{}
\titleformat{\subsubsection}{\normalsize\bfseries}{\thesubsubsection}{1em}{}
\titleformat{\paragraph}{\normalsize\bfseries}{\theparagraph}{1em}{}
\titleformat{\subparagraph}{\normalsize\bfseries}{\thesubparagraph}{1em}{}
\titleformat{\subsubparagraph}{\normalsize\bfseries}{\thesubsubparagraph}{1em}{}
\ProvideDocumentCommand{\sct}{s o}{%
  \IfBooleanTF{#1}{%
    \IfNoValueTF{#2}{\section*}{\section*{#2}}%
  }{%
    \IfNoValueTF{#2}{\section}{\section{#2}}%
  }%
}
\ProvideDocumentCommand{\ssc}{s o}{%
  \IfBooleanTF{#1}{%
    \IfNoValueTF{#2}{\subsection*}{\subsection*{#2}}%
  }{%
    \IfNoValueTF{#2}{\subsection}{\subsection{#2}}%
  }%
}
\ProvideDocumentCommand{\sssc}{s o}{%
  \IfBooleanTF{#1}{%
    \IfNoValueTF{#2}{\subsubsection*}{\subsubsection*{#2}}%
  }{%
    \IfNoValueTF{#2}{\subsubsection}{\subsubsection{#2}}%
  }%
}
\ProvideDocumentCommand{\pr}{s o}{%
  \IfBooleanTF{#1}{%
    \IfNoValueTF{#2}{\paragraph*}{\paragraph*{#2}}%
  }{%
    \IfNoValueTF{#2}{\paragraph}{\paragraph{#2}}%
  }%
}
\ProvideDocumentCommand{\spr}{s o}{%
  \IfBooleanTF{#1}{%
    \IfNoValueTF{#2}{\subparagraph*}{\subparagraph*{#2}}%
  }{%
    \IfNoValueTF{#2}{\subparagraph}{\subparagraph{#2}}%
  }%
}
\ProvideDocumentCommand{\sspr}{s o}{%
  \IfBooleanTF{#1}{%
    \IfNoValueTF{#2}{\subsubparagraph*}{\subsubparagraph*{#2}}%
  }{%
    \IfNoValueTF{#2}{\subsubparagraph}{\subsubparagraph{#2}}%
  }%
}
%\usepackage{titletoc}
%\titlecontents{section}[0em]{\addvspace{1em}}{\thecontentslabel\quad}{}{\titlerule*[1pc]{.}\contentspage}
%\titlecontents{subsection}[2em]{\addvspace{0.5em}}{\thecontentslabel\quad}{}{\titlerule*[1pc]{.}\contentspage}
%\titlecontents{subsubsection}[4em]{\addvspace{0.5em}}{\thecontentslabel\ }{}{\titlerule*[1pc]{.}\contentspage}
%\renewcommand{\contentsname}{\hfill 目錄\hfill}
%\usepackage{hanging}
%\usepackage{etoolbox}
%\definecolor{myYellow}{HTML}{FFDD33}
%\usepackage{tcolorbox}
%\usepackage[version=4]{mhchem}
%\usepackage{chemfig}
%\makeatletter\tikzset{dot diameter/.store in=\dot@diameter,dot diameter=1pt,dot spacing/.store in=\dot@spacing,dot spacing=5.5pt,dots/.style={line width=\dot@diameter,line cap=round,dash pattern=on 0pt off \dot@spacing}}\makeatother
%\usepackage{braket}
%\newcounter{custompara}[subsubsection]\newcommand{\custompara}[1]{\refstepcounter{custompara}\begin{enumerate}[label=\textbf{\thecustompara\hspace{1em}},leftmargin=2em,labelwidth=1.5em,labelsep=0.5em,itemsep=-2em]\item#1\end{enumerate}}\renewcommand\thecustompara{(\arabic{custompara})}\titleformat{\custompara}{\normalsize\bfseries}{\thecustompara}{1em}{}[\vspace{-6pt}]\ProvideDocumentCommand{\cpr}{m}{\custompara{#1}}
%\usepackage{longtable}
%\usepackage{csvsimple}
%\makeatletter\csvset{autotabularcenter/.style={file=#1,after head=\csv@pretable\begin{tabular}{|*{\csv@columncount}{c|}}\csv@tablehead,table head=\hline\csvlinetotablerow\\\hline,late after line=\\,lable foot=\\\hline,late after last line=\csv@tablefoot\end{tabular}\csv@posttable,command=\csvlinetotablerow},autobooktabularcenter/.style={file=#1,after head=\csv@pretable\begin{tabular}{*{\csv@columncount}{c}}\csv@tablehead,table head=\toprule\csvlinetotablerow\\\midrule,late after line=\\,table foot=\\\bottomrule,late after last line=\csv@tablefoot\end{tabular}\csv@posttable,command=\csvlinetotablerow}}\makeatother\newcommand{\csvautotabularcenter}[2][]{\csvloop{autotabularcenter={#2},#1}}\newcommand{\csvautobooktabularcenter}[2][]{\csvloop{autobooktabularcenter={#2},#1}}
%\usepackage{pdfpages}
%\renewcommand{\arraystretch}{1.5}
%\renewcommand{\refname}{參考文獻}
\setCJKmainfont{Iansui-Regular.ttf}
%\setCJKfamilyfont{kaiu}{kaiu.ttf}
%\newcommand{\kaiu}[1]{{\CJKfamily{kaiu}#1}}
%\setCJKfamilyfont{notor}{NotoSansTC-Regular.otf}
%\newcommand{\notor}[1]{{\CJKfamily{notor}#1}}
%\setmathfont{XITSMath-Regular.otf}
\title{\$title\$}
\author{\$author\$}
\date{\$date\$}
\begin{document}
\setcounter{secnumdepth}{6}
%\setcounter{tocdepth}{3}
\thispagestyle{empty}
\onehalfspacing
\nth
\maketitle
%\nth
%\setcounter{page}{1}
%\tableofcontents
\nthm
\setcounter{page}{1}

\$body\$

\end{document}